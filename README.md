# kindle2cosense

Kindleからエクスポートされた書籍データ（JSON形式）を、Cosense（旧Scrapbox）にインポート可能な形式に変換するPythonツールです。

## 概要

このツールは、Kindleのライブラリデータを読み込み、個人の知識管理ツールであるCosenseで活用しやすい形に変換します。単なるデータ変換だけでなく、著者名やシリーズ名のリンク化、Amazonへのリンク生成などを自動的に行います。

## 主な機能

- **データ変換**: KindleのJSONエクスポートデータをCosenseのページ形式（JSON）に変換
- **著者リンク**: 著者名を自動的にブラケット `[]` で囲み、リンクとして機能させます
- **読書ステータス**: 読書状態（既読/未読など）をリンクとして扱います
- **Amazonリンク**: ASIN情報を使用して、Amazon商品ページおよびKindle Cloud Readerへのリンクを生成します
- **自動グルーピング**: 書籍タイトルからシリーズ名や出版社名（レーベル）を自動抽出し、関連書籍をリンクで繋げます
  - 例: 「ちびまる子ちゃん 10 (りぼんマスコットコミックスDIGITAL)」 → `[ちびまる子ちゃん]`, `[りぼんマスコットコミックスDIGITAL]`

## 必要要件

- Python 3.x

## 使用方法

### 1. 準備

リポジトリをクローンし、入力データを配置します。

1. `input` ディレクトリを作成します（存在しない場合）。
2. KindleからエクスポートしたJSONデータを `input/kindle.json` として配置します。

### 2. 実行

`make` コマンドを使用して変換を実行します。

```bash
make
```

または、Pythonスクリプトを直接実行することも可能です。

```bash
python kindle2cosense.py
```

### 3. 出力確認

変換が完了すると、`build` ディレクトリに `cosense.json` が生成されます。
このファイルをCosenseのプロジェクト設定からインポートしてください。

### 4. クリーンアップ

生成されたファイルを削除するには、以下のコマンドを実行します。

```bash
make clean
```

## ファイル構成

- `kindle2cosense.py`: 変換ロジックを含むメインスクリプト
- `Makefile`: ビルドおよびクリーニング用のコマンド定義
- `input/`: 入力ファイル配置用ディレクトリ
- `build/`: 出力ファイル生成用ディレクトリ
- `spec.md`: 変換仕様の詳細
- `grouping.md`: グルーピングロジックの詳細
